#:import C kivy.utils.get_color_from_hex

WindowManager:
    MainWindow:
    TrainingWindow:
    MySetsWindow:
    
<SavePopupWindow>
    title: 'Enter Set Name'
    size_hint: None, None
    size: 300, 200

    popuptextinput: popuptextinput

    FloatLayout:
        canvas.before:
            Color:
                rgba: 33/255, 172/255, 47/255, 1
            Rectangle:
                size: self.size
                pos: self.pos
        TextInput:
            id: popuptextinput
            multiline: False
            text_size: self.size
            font_size: 22
            font_name: 'Fonts/Roboto-Medium.ttf'
            foreground_color: C('#ffffff')
            halign: "center"
            background_normal: 'TextInputBackground/TextInputBackgroundNormal.png'
            background_active: 'TextInputBackground/TextInputBackgroundActive.png'
            size_hint: (0.98, 0.48)
            pos_hint: {"x": 0.01, "y": 0.51}

        Button:
            text: "Save"
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press:
                root.PopupSavePressed()
            size_hint: (0.98, 0.48)
            pos_hint: {"x": 0.01, "y": 0.01}

<MainWindow>
    name: "main"

    sets: sets
    workMinutes: workMinutes
    workSeconds: workSeconds
    restMinutes: restMinutes
    restSeconds: restSeconds

    FloatLayout:
        Label:
            text: "Sets"
            font_size: 30
            font_name: 'Fonts/Roboto-Medium.ttf'
            size_hint: (1, 0.06)
            pos_hint: {"x": 0, "y": 0.94}

        TextInput:
            id: sets
            multiline: False
            text: "0"
            text_size: self.size
            font_size: 22
            font_name: 'Fonts/Roboto-Medium.ttf'
            foreground_color: C('#ffffff')
            halign: "center"
            background_normal: 'TextInputBackground/TextInputBackgroundNormal.png'
            background_active: 'TextInputBackground/TextInputBackgroundActive.png'
            size_hint: (0.20, 0.06)
            pos_hint: {"x": 0.40, "y": 0.88}

        Label:
            text: "Work"
            font_size: 30
            font_name: 'Fonts/Roboto-Medium.ttf'
            size_hint: (1, 0.06)
            pos_hint: {"x": 0, "y": 0.82}

        TextInput:
            id: workMinutes
            multiline: False
            text: "0"
            text_size: self.size
            font_size: 22
            font_name: 'Fonts/Roboto-Medium.ttf'
            foreground_color: C('#ffffff')
            halign: "center"
            background_normal: 'TextInputBackground/TextInputBackgroundNormal.png'
            background_active: 'TextInputBackground/TextInputBackgroundActive.png'
            size_hint: (0.20, 0.06)
            pos_hint: {"x": 0.28, "y": 0.76}
        
        Label:
            text: ":"
            font_name: 'Fonts/Roboto-Medium.ttf'
            size_hint: (0.04, 0.06)
            pos_hint: {"x": 0.48, "y": 0.76}
        
        TextInput:
            id: workSeconds
            multiline: False
            text: "0"
            text_size: self.size
            font_size: 22
            font_name: 'Fonts/Roboto-Medium.ttf'
            foreground_color: C('#ffffff')
            halign: "center"
            background_normal: 'TextInputBackground/TextInputBackgroundNormal.png'
            background_active: 'TextInputBackground/TextInputBackgroundActive.png'
            size_hint: (0.20, 0.06)
            pos_hint: {"x": 0.52, "y": 0.76}

        Label:
            text: "Rest"
            font_size: 30
            font_name: 'Fonts/Roboto-Medium.ttf'
            size_hint: (1, 0.06)
            pos_hint: {"x": 0, "y": 0.70}    
            
        TextInput:
            id: restMinutes
            multiline: False
            text: "0"
            text_size: self.size
            font_size: 22
            font_name: 'Fonts/Roboto-Medium.ttf'
            foreground_color: C('#ffffff')
            halign: "center"
            background_normal: 'TextInputBackground/TextInputBackgroundNormal.png'
            background_active: 'TextInputBackground/TextInputBackgroundActive.png'
            size_hint: (0.20, 0.06)
            pos_hint: {"x": 0.28, "y": 0.64}
        
        Label:
            text: ":"
            font_name: 'Fonts/Roboto-Medium.ttf'
            size_hint: (0.04, 0.06)
            pos_hint: {"x": 0.48, "y": 0.64}
        
        TextInput:
            id: restSeconds
            multiline: False
            text: "0"
            text_size: self.size
            font_size: 22
            font_name: 'Fonts/Roboto-Medium.ttf'
            foreground_color: C('#ffffff')
            halign: "center"
            background_normal: 'TextInputBackground/TextInputBackgroundNormal.png'
            background_active: 'TextInputBackground/TextInputBackgroundActive.png'
            size_hint: (0.20, 0.06)
            pos_hint: {"x": 0.52, "y": 0.64}
            
        Button:
            id: AddButton
            text: "Add"
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.AddPressed()
            size_hint: (0.49, 0.13)
            pos_hint: {"x": 0.505, "y": 0.485}

        Button:
            id: ResetButton
            text: "Reset"
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.ResetPressed()
            size_hint: (0.49, 0.13)
            pos_hint: {"x": 0.005, "y": 0.485}
        
        Button:
            id: StartButton
            text: "Start"
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: 
                app.root.current = "training"
                root.manager.transition.direction = "left"
            size_hint: (0.99, 0.13)
            pos_hint: {"x": 0.005, "y": 0.35}    

        ScrollView:
            size_hint: (1, 0.24)
            pos_hint: {"x": 0, "y": 0.1}
            Label:
                text: root.timesLabel
                halign: "center"
                font_size: 20
                font_name: 'Fonts/Roboto-Medium.ttf'
                text_size: (self.width, None)
                pos_hint: {"x": 0, "y": 0}
                size_hint_y: None
                height: self.texture_size[1]
        
        Button:
            text: "My Sets"
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press:
                app.root.current = "mysets"
                root.manager.transition.direction = "right"
            size_hint: (0.49, 0.09)
            pos_hint: {"x": 0.005, "y": 0.005}

        Button:
            text: "Save"
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.SavePressed()
            size_hint: (0.49, 0.09)
            pos_hint: {"x": 0.505, "y": 0.005}

<TrainingWindow>
    name: "training"

    FloatLayout:
        Label:
            text: root.names
            font_size: 40
            font_name: 'Fonts/Roboto-Medium.ttf'
            size_hint: (1, 0.2)
            pos_hint: {"x": 0, "y": 0.8}

        Label:
            text: root.seconds
            font_size: 170
            font_name: 'Fonts/Roboto-Medium.ttf'
            size_hint: (1, 0.4)
            pos_hint: {"x": 0, "y": 0.4}

        Label:
            text: "Seconds"
            font_name: 'Fonts/Roboto-Medium.ttf'
            size_hint: (1, 0.1)
            pos_hint: {"x": 0, "y": 0.3}
        
        Button:
            text: "Back"
            font_size: 20
            font_name: 'Fonts/Roboto-Medium.ttf'
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press:
                app.root.current = "main"
                root.manager.transition.direction = "right"
                root.BackPressed()
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.005}

<SetPopupWindow>
    title: root.currentset
    size_hint: None, None
    size: 300, 300

    FloatLayout:
        canvas.before:
            Color:
                rgba: 33/255, 172/255, 47/255, 1
            Rectangle:
                size: self.size
                pos: self.pos

        ScrollView:
            size_hint: (1, 0.75)
            pos_hint: {"x": 0, "y": 0.25}
            Label:
                text: root.timesLabel
                halign: "center"
                font_size: 20
                font_name: 'Fonts/Roboto-Medium.ttf'
                text_size: (self.width, None)
                pos_hint: {"x": 0, "y": 0}
                size_hint_y: None
                height: self.texture_size[1]

        Button:
            text: "Start"
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press:
                root.StartPressed()
                app.root.current = "training"
            size_hint: (0.48, 0.23)
            pos_hint: {"x": 0.01, "y": 0.01}
        
        Button:
            text: "Remove"
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.RemovePressed()
            size_hint: (0.48, 0.23)
            pos_hint: {"x": 0.51, "y": 0.01}


<MySetsWindow>
    name: "mysets"

    FloatLayout:
        Button:
            id: set1
            text: root.setsnames[0] if len(root.setsnames) >= 1 else ''
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press:
                root.SetPressed(self)
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.905}

        Button:
            id: set2
            text: root.setsnames[1] if len(root.setsnames) >= 2 else ''
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.SetPressed(self)
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.805}

        Button:
            id: set3
            text: root.setsnames[2] if len(root.setsnames) >= 3 else ''
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.SetPressed(self)
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.705}

        Button:
            id: set4
            text: root.setsnames[3] if len(root.setsnames) >= 4 else ''
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.SetPressed(self)
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.605}

        Button:
            id: set5
            text: root.setsnames[4] if len(root.setsnames) >= 5 else ''
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.SetPressed(self)
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.505}

        Button:
            id: set6
            text: root.setsnames[5] if len(root.setsnames) >= 6 else ''
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.SetPressed(self)
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.405}

        Button:
            id: set7
            text: root.setsnames[6] if len(root.setsnames) >= 7 else ''
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.SetPressed(self)
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.305}

        Button:
            id: set8
            text: root.setsnames[7] if len(root.setsnames) >= 8 else ''
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.SetPressed(self)
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.205}

        Button:
            id: set9
            text: root.setsnames[8] if len(root.setsnames) >= 9 else ''
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press: root.SetPressed(self)
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.105}

        Button:
            text: "Back"
            font_name: 'Fonts/Roboto-Medium.ttf'
            font_size: 20
            background_normal: 'ButtonBackground/ButtonBackgroundNormal.png'
            background_down: 'ButtonBackground/ButtonBackgroundDown.png'
            on_press:
                app.root.current = "main"
                root.manager.transition.direction = "left"
            size_hint: (0.99, 0.09)
            pos_hint: {"x": 0.005, "y": 0.005}